<!--
  Generated template for the ChatPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="{{user.theme}}">
    <ion-toolbar >
      <ion-buttons left>
        <ion-avatar end id="contact_profile">
          <img src="https://api.adorable.io/avatars/75/{{contact.id}}" >
        </ion-avatar>
      </ion-buttons>
      <ion-title>{{ contact.username }}</ion-title>
      <ion-buttons end>
        <button (click)="call()" *ngIf="connected" color="primary" round icon-only ion-button >
          <ion-icon name="call"></ion-icon>
        </button>
        <button ion-button icon-only>
            <ion-icon name="more"></ion-icon>
        </button>  
      </ion-buttons>
    </ion-toolbar>
  </ion-navbar>

</ion-header>


<ion-content padding id="content">
  <div id="chatMsg">
    <div *ngFor="let msg of _MESSAGES" [class]="msg.id_user == user.id ? 'msg-right msg':'msg-left msg'">
      <p>{{msg.content}}</p>
      <span>{{msg.creation}}</span>
    </div>
    <div *ngIf="_SESSION.user_out.includes(contact.username)" class="alert msg" >
      {{contact.username}} ha decidido marcharse
    </div>
  </div>
</ion-content>

<ion-footer>
  <ion-grid>
    <ion-row>
      <ion-col col-10>
        <ion-input type="text" placeholder="Escribe algo" [(ngModel)]="msgTemp" name="msgTemp"  ></ion-input>
      </ion-col>
      <ion-col  col-2 >
        <button [disabled]="_SESSION.user_out.includes(contact.username)" ion-button icon-only right id="send-msg" (click)="sendMsg()">
          <ion-icon name="send" icon-right></ion-icon>
        </button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>